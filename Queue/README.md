هذا الكود يقوم بتنفيذ بنية بيانات **الطابور** (Queue)، وهي بنية بيانات تعتمد على مبدأ **FIFO** (First In, First Out)، أي أن أول عنصر تمت إضافته إلى الطابور هو أول عنصر يتم إزالته منه. يتم تنفيذ الطابور باستخدام مصفوفة ثابتة الحجم.

سنشرح الكود سطرًا بسطر ونفهم كل جزء منه بالتفصيل.

---

### 1. تضمين المكتبات
```c
#include <stdio.h>
#include <stdlib.h>
```
- **`#include <stdio.h>`**: هذه المكتبة تحتوي على الدوال الخاصة بالإدخال والإخراج، مثل `printf` و `scanf`.
- **`#include <stdlib.h>`**: هذه المكتبة تحتوي على الدوال الخاصة بتخصيص الذاكرة، مثل `malloc`.

---

### 2. تعريف الثوابت والهياكل
```c
#define MAX 100

typedef struct {
    int items[MAX];
    int front;
    int rear;
} Queue;
```
- **`#define MAX 100`**: يحدد الحد الأقصى لعدد العناصر التي يمكن تخزينها في الطابور.
- **`typedef struct`**: يعرّف نوع بيانات جديد يسمى `Queue`، وهو هيكل يمثل الطابور.
- **`int items[MAX];`**: يمثل المصفوفة التي ستُستخدم لتخزين عناصر الطابور.
- **`int front;`**: يمثل مؤشر العنصر الأول (الأمامي) في الطابور.
- **`int rear;`**: يمثل مؤشر العنصر الأخير (الخلفي) في الطابور.

---

### 3. دالة `initialize`
```c
void initialize(Queue* q) {
    q->front = -1;
    q->rear = -1;
}
```
- **الهدف**: تهيئة الطابور.
- **`q->front = -1;`**: يتم تعيين مؤشر العنصر الأول إلى `-1` للإشارة إلى أن الطابور فارغ.
- **`q->rear = -1;`**: يتم تعيين مؤشر العنصر الأخير إلى `-1` للإشارة إلى أن الطابور فارغ.

---

### 4. دالة `isEmpty`
```c
int isEmpty(Queue* q) {
    return q->front == -1;
}
```
- **الهدف**: التحقق مما إذا كان الطابور فارغًا.
- **`return q->front == -1;`**: إذا كان مؤشر العنصر الأول يساوي `-1`، فإن الطابور فارغ.

---

### 5. دالة `isFull`
```c
int isFull(Queue* q) {
    return q->rear == MAX - 1;
}
```
- **الهدف**: التحقق مما إذا كان الطابور ممتلئًا.
- **`return q->rear == MAX - 1;`**: إذا كان مؤشر العنصر الأخير يساوي `MAX - 1`، فإن الطابور ممتلئ.

---

### 6. دالة `enqueue`
```c
void enqueue(Queue* q, int value) {
    if (isFull(q)) {
        printf("Queue is full\n");
        return;
    }
    if (isEmpty(q)) {
        q->front = 0;
    }
    q->items[++q->rear] = value;
}
```
- **الهدف**: إضافة عنصر إلى الطابور.
- **`if (isFull(q))`**: إذا كان الطابور ممتلئًا، يتم طباعة رسالة خطأ.
- **`if (isEmpty(q))`**: إذا كان الطابور فارغًا، يتم تعيين مؤشر العنصر الأول إلى `0`.
- **`q->items[++q->rear] = value;`**: يتم إضافة العنصر `value` إلى الطابور وزيادة مؤشر العنصر الأخير بمقدار 1.

---

### 7. دالة `dequeue`
```c
int dequeue(Queue* q) {
    if (isEmpty(q)) {
        printf("Queue is empty\n");
        return -1;
    }
    int value = q->items[q->front];
    if (q->front >= q->rear) {
        q->front = -1;
        q->rear = -1;
    } else {
        q->front++;
    }
    return value;
}
```
- **الهدف**: إزالة عنصر من الطابور.
- **`if (isEmpty(q))`**: إذا كان الطابور فارغًا، يتم طباعة رسالة خطأ.
- **`int value = q->items[q->front];`**: يتم تخزين العنصر الذي سيتم حذفه.
- **`if (q->front >= q->rear)`**: إذا كان هناك عنصر واحد فقط في الطابور، يتم تعيين مؤشرات العنصر الأول والأخير إلى `-1`.
- **`else`**: إذا كان هناك أكثر من عنصر واحد، يتم زيادة مؤشر العنصر الأول بمقدار 1.
- **`return value;`**: يتم إرجاع العنصر الذي تم حذفه.

---

### 8. دالة `peek`
```c
int peek(Queue* q) {
    if (isEmpty(q)) {
        printf("Queue is empty\n");
        return -1;
    }
    return q->items[q->front];
}
```
- **الهدف**: عرض العنصر الأول في الطابور دون إزالته.
- **`if (isEmpty(q))`**: إذا كان الطابور فارغًا، يتم طباعة رسالة خطأ.
- **`return q->items[q->front];`**: يتم إرجاع العنصر الأول في الطابور.

---

### 9. دالة `main`
```c
int main() {
    Queue q;
    initialize(&q);
    int n;
    scanf("%d", &n);

    for (int i = 0; i < n; i++) {
        char command[10];
        int value;
        scanf("%s", command);

        if (strcmp(command, "enqueue") == 0) {
            scanf("%d", &value);
            enqueue(&q, value);
        } else if (strcmp(command, "dequeue") == 0) {
            printf("%d\n", dequeue(&q));
        } else if (strcmp(command, "peek") == 0) {
            printf("%d\n", peek(&q));
        }
    }

    return 0;
}
```
- **الهدف**: بدء تنفيذ البرنامج ومعالجة الأوامر.
- **`Queue q;`**: يتم إنشاء طابور.
- **`initialize(&q);`**: يتم تهيئة الطابور.
- **`scanf("%d", &n);`**: يتم قراءة عدد العمليات من المستخدم.
- **`for (int i = 0; i < n; i++)`**: يتم تكرار العمليات المدخلة من المستخدم.
- **`if (strcmp(command, "enqueue") == 0)`**: إذا كانت العملية هي `enqueue`، يتم قراءة القيمة وإضافتها إلى الطابور.
- **`else if (strcmp(command, "dequeue") == 0)`**: إذا كانت العملية هي `dequeue`، يتم إزالة العنصر الأول من الطابور وطباعته.
- **`else if (strcmp(command, "peek") == 0)`**: إذا كانت العملية هي `peek`، يتم عرض العنصر الأول في الطابور دون إزالته.

---

### ملخص الكود
هذا الكود يقوم بتنفيذ بنية بيانات **الطابور** باستخدام مصفوفة ثابتة الحجم. يوفر العمليات الأساسية مثل إضافة عنصر إلى الطابور (`enqueue`)، إزالة عنصر من الطابور (`dequeue`)، وعرض العنصر الأول في الطابور (`peek`). يتم التحكم في الطابور باستخدام مؤشرين: `front` و `rear`.
